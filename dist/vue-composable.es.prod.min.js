import{isRef as e,onMounted as t,onUnmounted as n,ref as u,computed as o,watch as l}from"@vue/composition-api";function r(u,o,l,r){const a=e(u)?u.value:u,c=()=>a.removeEventListener(o,l);return t(()=>a.addEventListener(o,l,r)),n(c),c}function a(t){return e(t)?t.value:t}function c(t){return e(t)?t:u(t)}function i(e){const t=c(e.currentPage),n=c(e.pageSize),r=u(0),a=c(e.total),i=o({get:()=>r.value,set(e){"number"==typeof e?r.value=Math.min(e,a.value):"production"!==process.env.NODE_ENV&&console.warn(`[offset] expected number but got: '${typeof e}' value: '${e}'`)}}),v=o({get:()=>t.value,set(e){var n,u,o;"number"==typeof e?(t.value=(n=e,u=1,o=f.value,n<u?u:n>o?o:n),i.value=(t.value-1)*s.value):"production"!==process.env.NODE_ENV&&console.warn(`[currentPage] expected number but got: '${typeof e}' value: '${e}'`)}}),s=o({get:()=>n.value,set(e){"number"==typeof e?n.value=e:"production"!==process.env.NODE_ENV&&console.warn(`[pageSize] expected number but got: '${typeof e}' value: '${e}'`)}}),f=o(()=>Math.ceil(a.value/s.value));v.value=t.value;return l([a,s],()=>{v.value>f.value&&(v.value=f.value)},{lazy:!0}),{pageSize:s,total:a,currentPage:v,offset:i,lastPage:f,next:()=>++v.value,prev:()=>--v.value,first:()=>v.value=1,last:()=>v.value=f.value}}function v(e,t){const n=c(e),u=i({currentPage:1,pageSize:10,...t,total:o(()=>n.value.length)}),l=o(()=>{const e=n.value;return Array.isArray(e)?e.slice(u.offset.value,u.offset.value+u.pageSize.value):[]});return{...u,result:l}}function s(e,t){return f(e,t)}function f(e,t=50,n={isImmediate:!1}){let u;return function(...o){const l=this,r=n.isImmediate&&void 0===u;void 0!==u&&clearTimeout(u),u=setTimeout((function(){u=void 0,n.isImmediate||e.apply(l,o)}),t),r&&e.apply(l,o)}}function p(e,t,n){const o=a(e),l=u(0),c=u(0);let i=e=>{l.value=e.x,c.value=e.y};const v="number"==typeof t?void 0:t;("number"==typeof t?t:n)&&(i=s(i,n));const f=r(o,"mousemove",i,v);return{mouseX:l,mouseY:c,remove:f}}function m(e,t,n){const o=a(e),l=u(o.clientHeight),c=u(o.clientWidth);let i=e=>{l.value=o.clientHeight,c.value=o.clientWidth};const v="number"==typeof t?void 0:t;("number"==typeof t?t:n)&&(i=s(i,n));const f=r(o,"resize",i,v);return{height:l,width:c,remove:f}}function d(e,t,n){const o=a(e),l=u(o.scrollTop),c=u(o.scrollLeft);let i=e=>{l.value=o.scrollTop,c.value=o.scrollLeft};const v="number"==typeof t?void 0:t;("number"==typeof t?t:n)&&(i=s(i,n));const f=r(o,"scroll",i,v);return{scrollTop:l,scrollLeft:c,remove:f}}function y(e){if(!e)throw new Error(`[usePromise] argument can't be '${e}'`);if("function"!=typeof e)throw new Error(`[usePromise] expects function, but received ${typeof e}`);const t=u(!1),n=u(null),o=u(null),l=u();let r=null;return{exec:async(...u)=>{t.value=!0,n.value=null,o.value=null;const a=l.value=r=e(...u);try{const e=await a;return r===a&&(o.value=e),e}catch(e){return void(r===a&&(n.value=e,o.value=null))}finally{r===a&&(t.value=!1)}},result:o,promise:l,loading:t,error:n}}function g(e){const t=u(!1);let n=void 0;return{...y((...u)=>(e=>new Promise((u,o)=>{n=e=>{t.value=!0,o(e)},e.then(u).catch(o)}))(e(...u))),cancel:e=>n(e),cancelled:t}}export{f as debounce,v as useArrayPagination,g as useCancellablePromise,s as useDebounce,r as useEvent,p as useMouseMove,m as useOnResize,d as useOnScroll,i as usePagination,y as usePromise};
